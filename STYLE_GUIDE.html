<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html"><link rel="search" title="Search" href="search.html"><link rel="next" title="Testing Strategy" href="TESTING_STRATEGY.html"><link rel="prev" title="User Guide" href="user-guide.html">

    <!-- Generated with Sphinx 9.1.0 and Furo 2025.12.19 -->
        <title>NCAA Eval Style Guide - ncaa_eval 0.9.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=7bdb33bb" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">ncaa_eval 0.9.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <span class="sidebar-brand-text">ncaa_eval 0.9.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">User Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user-guide.html">User Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guides:</span></p>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">NCAA Eval Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="TESTING_STRATEGY.html">Testing Strategy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Testing Guides:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="testing/conventions.html">Testing Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing/domain-testing.html">Domain-Specific Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing/execution.html">Test Execution Tiers</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing/quality.html">Test Suite Quality Assurance</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing/test-approach-guide.html">Test Approach Guide: Example-Based vs Property-Based vs Fuzz-Based Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing/test-purpose-guide.html">Test Purpose Guide: Functional, Performance, and Regression Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing/test-scope-guide.html">Test Scope Guide: Unit vs Integration Tests</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference:</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="api/modules.html">ncaa_eval</a><input aria-label="Toggle navigation of ncaa_eval" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="api/ncaa_eval.html">ncaa_eval package</a><input aria-label="Toggle navigation of ncaa_eval package" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="api/ncaa_eval.cli.html">ncaa_eval.cli package</a><input aria-label="Toggle navigation of ncaa_eval.cli package" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.cli.main.html">ncaa_eval.cli.main module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.cli.train.html">ncaa_eval.cli.train module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="api/ncaa_eval.evaluation.html">ncaa_eval.evaluation package</a><input aria-label="Toggle navigation of ncaa_eval.evaluation package" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.evaluation.backtest.html">ncaa_eval.evaluation.backtest module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.evaluation.metrics.html">ncaa_eval.evaluation.metrics module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.evaluation.plotting.html">ncaa_eval.evaluation.plotting module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.evaluation.simulation.html">ncaa_eval.evaluation.simulation module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.evaluation.splitter.html">ncaa_eval.evaluation.splitter module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="api/ncaa_eval.ingest.html">ncaa_eval.ingest package</a><input aria-label="Toggle navigation of ncaa_eval.ingest package" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="api/ncaa_eval.ingest.connectors.html">ncaa_eval.ingest.connectors package</a><input aria-label="Toggle navigation of ncaa_eval.ingest.connectors package" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l5"><a class="reference internal" href="api/ncaa_eval.ingest.connectors.base.html">ncaa_eval.ingest.connectors.base module</a></li>
<li class="toctree-l5"><a class="reference internal" href="api/ncaa_eval.ingest.connectors.espn.html">ncaa_eval.ingest.connectors.espn module</a></li>
<li class="toctree-l5"><a class="reference internal" href="api/ncaa_eval.ingest.connectors.kaggle.html">ncaa_eval.ingest.connectors.kaggle module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.ingest.repository.html">ncaa_eval.ingest.repository module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.ingest.schema.html">ncaa_eval.ingest.schema module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.ingest.sync.html">ncaa_eval.ingest.sync module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="api/ncaa_eval.model.html">ncaa_eval.model package</a><input aria-label="Toggle navigation of ncaa_eval.model package" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.model.base.html">ncaa_eval.model.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.model.elo.html">ncaa_eval.model.elo module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.model.logistic_regression.html">ncaa_eval.model.logistic_regression module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.model.registry.html">ncaa_eval.model.registry module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.model.tracking.html">ncaa_eval.model.tracking module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.model.xgboost_model.html">ncaa_eval.model.xgboost_model module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="api/ncaa_eval.transform.html">ncaa_eval.transform package</a><input aria-label="Toggle navigation of ncaa_eval.transform package" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.transform.calibration.html">ncaa_eval.transform.calibration module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.transform.elo.html">ncaa_eval.transform.elo module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.transform.feature_serving.html">ncaa_eval.transform.feature_serving module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.transform.graph.html">ncaa_eval.transform.graph module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.transform.normalization.html">ncaa_eval.transform.normalization module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.transform.opponent.html">ncaa_eval.transform.opponent module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.transform.sequential.html">ncaa_eval.transform.sequential module</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.transform.serving.html">ncaa_eval.transform.serving module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="api/ncaa_eval.utils.html">ncaa_eval.utils package</a><input aria-label="Toggle navigation of ncaa_eval.utils package" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l4"><a class="reference internal" href="api/ncaa_eval.utils.logger.html">ncaa_eval.utils.logger module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/STYLE_GUIDE.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="ncaa-eval-style-guide">
<h1>NCAA Eval Style Guide<a class="headerlink" href="#ncaa-eval-style-guide" title="Link to this heading">¶</a></h1>
<p>This guide documents the coding standards and conventions for the <code class="docutils literal notranslate"><span class="pre">ncaa_eval</span></code> project.
All rules here reflect decisions already configured in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>. Tooling
enforcement is handled by separate stories (1.4-1.6); this document captures the
<strong>what</strong> and <strong>why</strong>.</p>
<hr class="docutils" />
<section id="docstring-convention-google-style">
<h2>1. Docstring Convention (Google Style)<a class="headerlink" href="#docstring-convention-google-style" title="Link to this heading">¶</a></h2>
<p><strong>Choice:</strong> Google-style docstrings.
<strong>Configured in:</strong> <code class="docutils literal notranslate"><span class="pre">[tool.ruff.lint.pydocstyle]</span> <span class="pre">convention</span> <span class="pre">=</span> <span class="pre">&quot;google&quot;</span></code></p>
<section id="rationale">
<h3>Rationale<a class="headerlink" href="#rationale" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Google style reads naturally in source code and renders well in Sphinx via
<code class="docutils literal notranslate"><span class="pre">napoleon</span></code>.</p></li>
<li><p>With PEP 484 type annotations present everywhere (mypy –strict), repeating
types inside docstrings is redundant. Google style keeps the prose concise.</p></li>
</ul>
</section>
<section id="rules">
<h3>Rules<a class="headerlink" href="#rules" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p><strong>Do not duplicate types</strong> in <code class="docutils literal notranslate"><span class="pre">Args:</span></code> / <code class="docutils literal notranslate"><span class="pre">Returns:</span></code> sections. Type information
lives in annotations only.</p></li>
<li><p>Include <code class="docutils literal notranslate"><span class="pre">Args:</span></code>, <code class="docutils literal notranslate"><span class="pre">Returns:</span></code> (unless <code class="docutils literal notranslate"><span class="pre">None</span></code>), and <code class="docutils literal notranslate"><span class="pre">Raises:</span></code> (if applicable).</p></li>
<li><p>Add an <code class="docutils literal notranslate"><span class="pre">Examples:</span></code> section for complex public functions.</p></li>
<li><p>Docstrings are <strong>encouraged but not enforced</strong> on every entity. When pydocstyle
(<code class="docutils literal notranslate"><span class="pre">D</span></code>) rules are enabled (Story 1.4), <code class="docutils literal notranslate"><span class="pre">D1</span></code> (missing docstring) and <code class="docutils literal notranslate"><span class="pre">D415</span></code>
(first-line punctuation) will be suppressed via the Ruff <code class="docutils literal notranslate"><span class="pre">ignore</span></code> list.
<strong>Note:</strong> <code class="docutils literal notranslate"><span class="pre">D</span></code> rules are <em>not currently active</em> — the <code class="docutils literal notranslate"><span class="pre">convention</span> <span class="pre">=</span> <span class="pre">&quot;google&quot;</span></code>
setting and ignore entries in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> are preparatory config that
takes effect once <code class="docutils literal notranslate"><span class="pre">D</span></code> is added to <code class="docutils literal notranslate"><span class="pre">extend-select</span></code> in Story 1.4.
At minimum, every public module and every public class should have a docstring.</p></li>
</ol>
</section>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>

<span class="k">def</span><span class="w"> </span><span class="nf">rolling_efficiency</span><span class="p">(</span>
    <span class="n">scores</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span>
    <span class="n">window</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">min_periods</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute rolling offensive efficiency over a sliding window.</span>

<span class="sd">    Applies an exponentially-weighted mean to per-game point totals,</span>
<span class="sd">    normalised by possessions.</span>

<span class="sd">    Args:</span>
<span class="sd">        scores: Raw per-game point totals.</span>
<span class="sd">        window: Number of games in the rolling window.</span>
<span class="sd">        min_periods: Minimum observations required for a valid result.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Rolling efficiency values aligned to the input index.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If *window* is less than 1.</span>

<span class="sd">    Examples:</span>
<span class="sd">        &gt;&gt;&gt; rolling_efficiency(pd.Series([70, 80, 90]), window=2)</span>
<span class="sd">        0      NaN</span>
<span class="sd">        1    75.0</span>
<span class="sd">        2    85.0</span>
<span class="sd">        dtype: float64</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="naming-conventions">
<h2>2. Naming Conventions<a class="headerlink" href="#naming-conventions" title="Link to this heading">¶</a></h2>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Entity</p></th>
<th class="head"><p>Convention</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Modules / packages</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">snake_case</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">feature_pipeline.py</span></code>, <code class="docutils literal notranslate"><span class="pre">ncaa_eval/</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Classes</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PascalCase</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">EloModel</span></code>, <code class="docutils literal notranslate"><span class="pre">TeamStats</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>Functions / methods</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">snake_case</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">compute_margin</span></code>, <code class="docutils literal notranslate"><span class="pre">get_team_id</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Variables</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">snake_case</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">home_score</span></code>, <code class="docutils literal notranslate"><span class="pre">season_df</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>Constants</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">UPPER_SNAKE_CASE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DEFAULT_K_FACTOR</span></code>, <code class="docutils literal notranslate"><span class="pre">MIN_GAMES</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Type aliases</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">PascalCase</span></code> (use <code class="docutils literal notranslate"><span class="pre">type</span></code> statement)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">TeamId</span> <span class="pre">=</span> <span class="pre">int</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>Private members</strong></p></td>
<td><p>Single leading underscore</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_cache</span></code>, <code class="docutils literal notranslate"><span class="pre">_validate_input()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Test files</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">test_&lt;module&gt;.py</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">test_elo_model.py</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>Test functions</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">test_&lt;behaviour&gt;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">test_margin_positive_when_home_wins</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<section id="additional-rules">
<h3>Additional Rules<a class="headerlink" href="#additional-rules" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>No abbreviations</strong> in public APIs unless universally understood (<code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">df</span></code>,
<code class="docutils literal notranslate"><span class="pre">url</span></code>).</p></li>
<li><p><strong>Boolean names</strong> should read as predicates: <code class="docutils literal notranslate"><span class="pre">is_valid</span></code>, <code class="docutils literal notranslate"><span class="pre">has_played</span></code>,
<code class="docutils literal notranslate"><span class="pre">should_normalize</span></code>.</p></li>
<li><p><strong>DataFrame variables</strong> should indicate their grain: <code class="docutils literal notranslate"><span class="pre">game_df</span></code>, <code class="docutils literal notranslate"><span class="pre">season_stats_df</span></code>,
<code class="docutils literal notranslate"><span class="pre">team_features_df</span></code>.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="import-ordering">
<h2>3. Import Ordering<a class="headerlink" href="#import-ordering" title="Link to this heading">¶</a></h2>
<p><strong>Configured in:</strong> <code class="docutils literal notranslate"><span class="pre">[tool.ruff.lint.isort]</span></code></p>
<p>Imports are ordered in three groups separated by blank lines:</p>
<ol class="arabic simple">
<li><p><strong>Standard library</strong> (<code class="docutils literal notranslate"><span class="pre">os</span></code>, <code class="docutils literal notranslate"><span class="pre">pathlib</span></code>, <code class="docutils literal notranslate"><span class="pre">typing</span></code>, …)</p></li>
<li><p><strong>Third-party</strong> (<code class="docutils literal notranslate"><span class="pre">pandas</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, <code class="docutils literal notranslate"><span class="pre">xgboost</span></code>, …)</p></li>
<li><p><strong>Local / first-party</strong> (<code class="docutils literal notranslate"><span class="pre">ncaa_eval</span></code>, <code class="docutils literal notranslate"><span class="pre">tests</span></code>)</p></li>
</ol>
<section id="mandatory-rules">
<h3>Mandatory Rules<a class="headerlink" href="#mandatory-rules" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Rule</p></th>
<th class="head"><p>Detail</p></th>
<th class="head"><p>Config Reference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Future annotations</p></td>
<td><p>Every file must start with <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">annotations</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">required-imports</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Combine as-imports</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">foo</span> <span class="pre">import</span> <span class="pre">bar,</span> <span class="pre">baz</span> <span class="pre">as</span> <span class="pre">B</span></code> on one line</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">combine-as-imports</span> <span class="pre">=</span> <span class="pre">true</span></code></p></td>
</tr>
<tr class="row-even"><td><p>First-party detection</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">tests</span></code> is known first-party</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">known-first-party</span> <span class="pre">=</span> <span class="pre">[&quot;tests&quot;]</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id1">
<h3>Example<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.model_selection</span><span class="w"> </span><span class="kn">import</span> <span class="n">TimeSeriesSplit</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">ncaa_eval.features</span><span class="w"> </span><span class="kn">import</span> <span class="n">rolling_efficiency</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ncaa_eval.models.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">ModelBase</span>
</pre></div>
</div>
</section>
<section id="active-ruff-rules">
<h3>Active Ruff Rules<a class="headerlink" href="#active-ruff-rules" title="Link to this heading">¶</a></h3>
<p>Beyond isort, <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> extends the default Ruff rules (<code class="docutils literal notranslate"><span class="pre">E</span></code>, <code class="docutils literal notranslate"><span class="pre">F</span></code>) with:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Rule</p></th>
<th class="head"><p>Category</p></th>
<th class="head"><p>What It Enforces</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">I</span></code></p></td>
<td><p>isort</p></td>
<td><p>Import ordering (see above)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">UP</span></code></p></td>
<td><p>pyupgrade</p></td>
<td><p>Modern Python syntax — e.g., <code class="docutils literal notranslate"><span class="pre">list[int]</span></code> not <code class="docutils literal notranslate"><span class="pre">List[int]</span></code>, <code class="docutils literal notranslate"><span class="pre">X</span> <span class="pre">|</span> <span class="pre">None</span></code> not <code class="docutils literal notranslate"><span class="pre">Optional[X]</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PT</span></code></p></td>
<td><p>flake8-pytest-style</p></td>
<td><p>Pytest best practices — e.g., <code class="docutils literal notranslate"><span class="pre">&#64;pytest.fixture</span></code> conventions, parametrize style</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TID25</span></code></p></td>
<td><p>tidy-imports</p></td>
<td><p>Import hygiene — bans relative imports from parent packages</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="suppressed-rules">
<h3>Suppressed Rules<a class="headerlink" href="#suppressed-rules" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Rule</p></th>
<th class="head"><p>Why Suppressed</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">E501</span></code></p></td>
<td><p>Line length is enforced by the Ruff <strong>formatter</strong> (110 chars), not the linter. Suppressing <code class="docutils literal notranslate"><span class="pre">E501</span></code> avoids double-reporting.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">D1</span></code></p></td>
<td><p>Missing-docstring warnings. Not yet active (see Section 1 note).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">D415</span></code></p></td>
<td><p>First-line punctuation. Not yet active (see Section 1 note).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<hr class="docutils" />
<section id="type-annotation-standards">
<h2>4. Type Annotation Standards<a class="headerlink" href="#type-annotation-standards" title="Link to this heading">¶</a></h2>
<p><strong>Configured in:</strong> <code class="docutils literal notranslate"><span class="pre">[tool.mypy]</span> <span class="pre">strict</span> <span class="pre">=</span> <span class="pre">true</span></code></p>
<section id="what-strict-means-for-developers">
<h3>What <code class="docutils literal notranslate"><span class="pre">--strict</span></code> Means for Developers<a class="headerlink" href="#what-strict-means-for-developers" title="Link to this heading">¶</a></h3>
<p>Every function signature, variable, and return type must be annotated. The strict
flag enables all of the following (as of mypy 1.x — the exact set may change with
future versions; run <code class="docutils literal notranslate"><span class="pre">mypy</span> <span class="pre">--help</span></code> to see the current list):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--disallow-untyped-defs</span></code> — every function needs annotations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--disallow-any-generics</span></code> — no bare <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">dict</span></code>; use <code class="docutils literal notranslate"><span class="pre">list[int]</span></code>, <code class="docutils literal notranslate"><span class="pre">dict[str,</span> <span class="pre">float]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--warn-return-any</span></code> — functions must not silently return <code class="docutils literal notranslate"><span class="pre">Any</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--no-implicit-reexport</span></code> — explicit <code class="docutils literal notranslate"><span class="pre">__all__</span></code> required for re-exports</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--strict-bytes</span></code> — distinguishes <code class="docutils literal notranslate"><span class="pre">bytes</span></code> from <code class="docutils literal notranslate"><span class="pre">str</span></code></p></li>
</ul>
</section>
<section id="practical-guidelines">
<h3>Practical Guidelines<a class="headerlink" href="#practical-guidelines" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">annotations</span></code> (already enforced) so all annotations
are strings and forward references work.</p></li>
<li><p>Use modern syntax: <code class="docutils literal notranslate"><span class="pre">list[int]</span></code> not <code class="docutils literal notranslate"><span class="pre">List[int]</span></code>, <code class="docutils literal notranslate"><span class="pre">X</span> <span class="pre">|</span> <span class="pre">None</span></code> not <code class="docutils literal notranslate"><span class="pre">Optional[X]</span></code>.</p></li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">type</span></code> statement for aliases: <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">TeamId</span> <span class="pre">=</span> <span class="pre">int</span></code>.</p></li>
<li><p>For third-party libraries with incomplete stubs (numpy, pandas, xgboost), the
config uses <code class="docutils literal notranslate"><span class="pre">follow_imports</span> <span class="pre">=</span> <span class="pre">&quot;silent&quot;</span></code> to suppress errors from untyped
dependencies. Add <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">type:</span> <span class="pre">ignore[&lt;code&gt;]</span></code> only when truly necessary and always
include the specific error code.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">py.typed</span></code> marker at <code class="docutils literal notranslate"><span class="pre">src/ncaa_eval/py.typed</span></code> signals PEP 561 compliance.</p></li>
</ol>
</section>
</section>
<hr class="docutils" />
<section id="vectorization-first">
<h2>5. Vectorization First<a class="headerlink" href="#vectorization-first" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p><strong>Reject PRs that use <code class="docutils literal notranslate"><span class="pre">for</span></code> loops over Pandas DataFrames for metric
calculations.</strong></p>
<p>— Architecture Section 12</p>
</div></blockquote>
<p>This is a <strong>hard rule</strong>. Scientific computation in this project must use vectorized
operations.</p>
<section id="why">
<h3>Why<a class="headerlink" href="#why" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Vectorized pandas/numpy operations are 10-100x faster than Python loops.</p></li>
<li><p>They are easier to reason about for correctness.</p></li>
<li><p>They compose cleanly with <code class="docutils literal notranslate"><span class="pre">.pipe()</span></code> chains.</p></li>
</ul>
</section>
<section id="correct-pattern">
<h3>Correct Pattern<a class="headerlink" href="#correct-pattern" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Vectorized — computes margin for every game in one shot</span>
<span class="n">game_df</span><span class="p">[</span><span class="s2">&quot;margin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">game_df</span><span class="p">[</span><span class="s2">&quot;home_score&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">game_df</span><span class="p">[</span><span class="s2">&quot;away_score&quot;</span><span class="p">]</span>

<span class="c1"># Vectorized rolling mean</span>
<span class="n">game_df</span><span class="p">[</span><span class="s2">&quot;rolling_ppg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">game_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;team_id&quot;</span><span class="p">)[</span><span class="s2">&quot;points&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="incorrect-pattern">
<h3>Incorrect Pattern<a class="headerlink" href="#incorrect-pattern" title="Link to this heading">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># WRONG — for loop over DataFrame rows</span>
<span class="n">margins</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">game_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">margins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;home_score&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;away_score&quot;</span><span class="p">])</span>
<span class="n">game_df</span><span class="p">[</span><span class="s2">&quot;margin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">margins</span>
</pre></div>
</div>
</section>
<section id="exceptions">
<h3>Exceptions<a class="headerlink" href="#exceptions" title="Link to this heading">¶</a></h3>
<p>Explicit <code class="docutils literal notranslate"><span class="pre">for</span></code> loops are acceptable only when:</p>
<ol class="arabic simple">
<li><p>Operating on a <strong>small, fixed collection</strong> (e.g., iterating over 5 model
configs, not 10,000 game rows).</p></li>
<li><p>Performing <strong>graph traversal</strong> (e.g., NetworkX operations that have no
vectorized equivalent).</p></li>
<li><p>The loop body involves <strong>side effects</strong> that cannot be vectorized (e.g.,
writing files per team).</p></li>
</ol>
<p>In these cases, add a brief comment explaining why the loop is necessary.</p>
</section>
</section>
<hr class="docutils" />
<section id="design-philosophy-pep-20-the-zen-of-python">
<h2>6. Design Philosophy (PEP 20 - The Zen of Python)<a class="headerlink" href="#design-philosophy-pep-20-the-zen-of-python" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p>“Beautiful is better than ugly. Explicit is better than implicit. Simple is better than complex.”</p>
<p>— PEP 20</p>
</div></blockquote>
<p>While PEP 20 can’t be fully automated, we enforce its core principles through code review and tooling where possible.</p>
<section id="enforced-principles">
<h3>Enforced Principles<a class="headerlink" href="#enforced-principles" title="Link to this heading">¶</a></h3>
<section id="simple-is-better-than-complex">
<h4>Simple is Better Than Complex<a class="headerlink" href="#simple-is-better-than-complex" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong>Tooling:</strong> Ruff complexity checks (see Section 6.1)</p></li>
<li><p><strong>Review:</strong> Max cyclomatic complexity = 10, max function length = 50 lines</p></li>
<li><p><strong>Guideline:</strong> If a function is hard to name, it’s doing too much — split it</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># GOOD: Simple, single-purpose function</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calculate_margin</span><span class="p">(</span><span class="n">home_score</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">away_score</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate point margin (positive = home win).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">home_score</span> <span class="o">-</span> <span class="n">away_score</span>

<span class="c1"># BAD: Too complex, doing multiple things</span>
<span class="k">def</span><span class="w"> </span><span class="nf">process_game</span><span class="p">(</span><span class="n">game_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Process game... but what does this actually do?&quot;&quot;&quot;</span>
    <span class="c1"># 80 lines of nested logic with unclear responsibilities</span>
    <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="explicit-is-better-than-implicit">
<h4>Explicit is Better Than Implicit<a class="headerlink" href="#explicit-is-better-than-implicit" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong>Tooling:</strong> Mypy strict mode enforces explicit types</p></li>
<li><p><strong>Review:</strong> No magic numbers, no implicit state changes, clear function names</p></li>
<li><p><strong>Guideline:</strong> Code should read like prose — the reader shouldn’t have to guess</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># GOOD: Explicit parameters and behavior</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calculate_elo_change</span><span class="p">(</span>
    <span class="n">rating</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">opponent_rating</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">won</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">k_factor</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate Elo rating change after a game.&quot;&quot;&quot;</span>
    <span class="n">expected</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">**</span> <span class="p">((</span><span class="n">opponent_rating</span> <span class="o">-</span> <span class="n">rating</span><span class="p">)</span> <span class="o">/</span> <span class="mi">400</span><span class="p">))</span>
    <span class="n">actual</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">won</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">k_factor</span> <span class="o">*</span> <span class="p">(</span><span class="n">actual</span> <span class="o">-</span> <span class="n">expected</span><span class="p">))</span>

<span class="c1"># BAD: Implicit behavior, magic numbers</span>
<span class="k">def</span><span class="w"> </span><span class="nf">adjust_rating</span><span class="p">(</span><span class="n">r</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">o</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">w</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="mi">32</span> <span class="o">*</span> <span class="p">(</span><span class="n">w</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">**</span> <span class="p">((</span><span class="n">o</span> <span class="o">-</span> <span class="n">r</span><span class="p">)</span> <span class="o">/</span> <span class="mi">400</span><span class="p">))))</span>
</pre></div>
</div>
</section>
<section id="readability-counts">
<h4>Readability Counts<a class="headerlink" href="#readability-counts" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong>Tooling:</strong> Ruff formatting (110 char lines), naming conventions</p></li>
<li><p><strong>Review:</strong> Variable names reflect domain concepts, not abbreviations</p></li>
<li><p><strong>Guideline:</strong> Write for humans first, computers second</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># GOOD: Clear domain language</span>
<span class="n">team_offensive_efficiency</span> <span class="o">=</span> <span class="n">total_points</span> <span class="o">/</span> <span class="n">total_possessions</span>

<span class="c1"># BAD: Abbreviations require mental translation</span>
<span class="n">off_eff</span> <span class="o">=</span> <span class="n">pts</span> <span class="o">/</span> <span class="n">poss</span>
</pre></div>
</div>
</section>
<section id="flat-is-better-than-nested">
<h4>Flat is Better Than Nested<a class="headerlink" href="#flat-is-better-than-nested" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong>Tooling:</strong> Ruff detects excessive nesting</p></li>
<li><p><strong>Review:</strong> Max nesting depth = 3</p></li>
<li><p><strong>Guideline:</strong> Use early returns to reduce nesting</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># GOOD: Flat structure with early returns</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_game</span><span class="p">(</span><span class="n">game</span><span class="p">:</span> <span class="n">Game</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate game data.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">game</span><span class="o">.</span><span class="n">home_score</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Home score cannot be negative&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">game</span><span class="o">.</span><span class="n">away_score</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Away score cannot be negative&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">game</span><span class="o">.</span><span class="n">date</span> <span class="o">&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Game cannot be in the future&quot;</span><span class="p">)</span>

<span class="c1"># BAD: Nested structure</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_game</span><span class="p">(</span><span class="n">game</span><span class="p">:</span> <span class="n">Game</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">game</span><span class="o">.</span><span class="n">home_score</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">game</span><span class="o">.</span><span class="n">away_score</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">game</span><span class="o">.</span><span class="n">date</span> <span class="o">&lt;=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">():</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Game cannot be in the future&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Away score cannot be negative&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Home score cannot be negative&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="there-should-be-one-obvious-way-to-do-it">
<h4>There Should Be One Obvious Way to Do It<a class="headerlink" href="#there-should-be-one-obvious-way-to-do-it" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong>Review:</strong> Follow established project patterns (e.g., vectorization for calculations)</p></li>
<li><p><strong>Guideline:</strong> Check existing code before inventing new approaches</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># GOOD: Follows project pattern (vectorized operations)</span>
<span class="n">game_df</span><span class="p">[</span><span class="s2">&quot;margin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">game_df</span><span class="p">[</span><span class="s2">&quot;home_score&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">game_df</span><span class="p">[</span><span class="s2">&quot;away_score&quot;</span><span class="p">]</span>

<span class="c1"># BAD: Invents custom approach (loops)</span>
<span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">game_df</span><span class="p">)):</span>
    <span class="n">game_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;margin&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">game_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;home_score&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">game_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="s2">&quot;away_score&quot;</span><span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="code-review-checklist-for-pep-20">
<h3>Code Review Checklist for PEP 20<a class="headerlink" href="#code-review-checklist-for-pep-20" title="Link to this heading">¶</a></h3>
<p>During code review, verify:</p>
<ul class="simple">
<li><p>[ ] <strong>Simplicity:</strong> Functions have single, clear responsibilities (McCabe complexity ≤ 10)</p></li>
<li><p>[ ] <strong>Explicitness:</strong> No magic numbers, parameters have clear names, behavior is obvious</p></li>
<li><p>[ ] <strong>Readability:</strong> Domain concepts use full words, not abbreviations</p></li>
<li><p>[ ] <strong>Flatness:</strong> Nesting depth ≤ 3, early returns preferred</p></li>
<li><p>[ ] <strong>Consistency:</strong> Follows existing project patterns (vectorization, type sharing, etc.)</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="complexity-gates-ruff-configuration">
<h3>6.1 Complexity Gates (Ruff Configuration)<a class="headerlink" href="#complexity-gates-ruff-configuration" title="Link to this heading">¶</a></h3>
<p><strong>Configured in:</strong> <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> → <code class="docutils literal notranslate"><span class="pre">[tool.ruff.lint.mccabe]</span></code></p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Metric</p></th>
<th class="head"><p>Limit</p></th>
<th class="head"><p>Enforced By</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>McCabe Cyclomatic Complexity</strong></p></td>
<td><p>10</p></td>
<td><p>Ruff <code class="docutils literal notranslate"><span class="pre">C901</span></code> (pre-commit)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Max Function Length</strong></p></td>
<td><p>50 lines</p></td>
<td><p>Manual review</p></td>
</tr>
<tr class="row-even"><td><p><strong>Max Nesting Depth</strong></p></td>
<td><p>3</p></td>
<td><p>Manual review</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Max Arguments</strong></p></td>
<td><p>5</p></td>
<td><p>Ruff <code class="docutils literal notranslate"><span class="pre">PLR0913</span></code> (pre-commit)</p></td>
</tr>
</tbody>
</table>
</div>
<p>See <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> for exact configuration.</p>
</section>
<hr class="docutils" />
<section id="pure-functions-vs-side-effects">
<h3>6.2 Pure Functions vs Side Effects<a class="headerlink" href="#pure-functions-vs-side-effects" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p><strong>Pure functions are easier to test, faster to run, and easier to reason about.</strong></p>
</div></blockquote>
<p><strong>Design guideline:</strong> Keep business logic pure, push side effects to edges.</p>
<section id="pure-functions-preferred">
<h4>Pure Functions (Preferred)<a class="headerlink" href="#pure-functions-preferred" title="Link to this heading">¶</a></h4>
<p><strong>Definition:</strong> Same input always produces same output, no side effects.</p>
<p><strong>Characteristics:</strong></p>
<ul class="simple">
<li><p>Deterministic (predictable)</p></li>
<li><p>No external dependencies (no I/O, no database, no network, no time/randomness)</p></li>
<li><p>No state mutation</p></li>
<li><p>Easy to test (just input → output, no mocking)</p></li>
<li><p>Perfect for property-based testing (Hypothesis)</p></li>
<li><p>Fast (no I/O)</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># PURE: Always deterministic, easy to test</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calculate_win_probability</span><span class="p">(</span><span class="n">rating_diff</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">k_factor</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">32.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate win probability from rating difference.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="n">rating_diff</span> <span class="o">/</span> <span class="mi">400</span><span class="p">))</span>

<span class="c1"># PURE: Data transformation, no side effects</span>
<span class="k">def</span><span class="w"> </span><span class="nf">normalize_team_names</span><span class="p">(</span><span class="n">names</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Normalize team names to standard format (vectorized).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">names</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;St.&quot;</span><span class="p">,</span> <span class="s2">&quot;Saint&quot;</span><span class="p">)</span>

<span class="c1"># PURE: Mathematical calculation (vectorized)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calculate_margins</span><span class="p">(</span><span class="n">home_scores</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">away_scores</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate point margins (vectorized, pure).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">home_scores</span> <span class="o">-</span> <span class="n">away_scores</span>
</pre></div>
</div>
<p><strong>Testing pure functions:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Unit test: Simple input → output</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_win_probability_equal_ratings</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify win probability is 50% for equal ratings.&quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">calculate_win_probability</span><span class="p">(</span><span class="n">rating_diff</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.5</span>

<span class="c1"># Property test: Perfect for pure functions</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">property</span>
<span class="nd">@given</span><span class="p">(</span><span class="n">rating_diff</span><span class="o">=</span><span class="n">st</span><span class="o">.</span><span class="n">integers</span><span class="p">(</span><span class="o">-</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_win_probability_always_bounded</span><span class="p">(</span><span class="n">rating_diff</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify win probability always in [0, 1] (invariant).&quot;&quot;&quot;</span>
    <span class="n">prob</span> <span class="o">=</span> <span class="n">calculate_win_probability</span><span class="p">(</span><span class="n">rating_diff</span><span class="p">)</span>
    <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">prob</span> <span class="o">&lt;=</span> <span class="mi">1</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="side-effect-functions-push-to-edges">
<h4>Side-Effect Functions (Push to Edges)<a class="headerlink" href="#side-effect-functions-push-to-edges" title="Link to this heading">¶</a></h4>
<p><strong>Definition:</strong> Functions that interact with the outside world or modify state.</p>
<p><strong>Characteristics:</strong></p>
<ul class="simple">
<li><p>Non-deterministic (may vary based on external state)</p></li>
<li><p>External dependencies (files, database, network, time, randomness)</p></li>
<li><p>Modifies state (mutates objects, writes files, updates database)</p></li>
<li><p>Harder to test (requires mocks, stubs, fixtures)</p></li>
<li><p>Requires integration tests</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># SIDE-EFFECT: Reads from file system</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load_games</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load games from CSV file (I/O operation).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

<span class="c1"># SIDE-EFFECT: Depends on current time (non-deterministic)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">is_game_started</span><span class="p">(</span><span class="n">game_start</span><span class="p">:</span> <span class="n">datetime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if game has started.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">game_start</span>  <span class="c1"># Changes over time</span>

<span class="c1"># SIDE-EFFECT: Mutates external state</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_team_rating</span><span class="p">(</span><span class="n">team_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">new_rating</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update team rating in database.&quot;&quot;&quot;</span>
    <span class="n">db</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE teams SET rating = ? WHERE id = ?&quot;</span><span class="p">,</span> <span class="n">new_rating</span><span class="p">,</span> <span class="n">team_id</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Testing side-effect functions:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Integration test: Requires fixtures</span>
<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">integration</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_load_games_returns_valid_dataframe</span><span class="p">(</span><span class="n">temp_data_dir</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify games can be loaded from CSV.&quot;&quot;&quot;</span>
    <span class="c1"># Setup: Create test file</span>
    <span class="n">test_file</span> <span class="o">=</span> <span class="n">temp_data_dir</span> <span class="o">/</span> <span class="s2">&quot;games.csv&quot;</span>
    <span class="n">test_file</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="s2">&quot;game_id,home_team,away_team</span><span class="se">\n</span><span class="s2">1,Duke,UNC</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Execute</span>
    <span class="n">games</span> <span class="o">=</span> <span class="n">load_games</span><span class="p">(</span><span class="n">test_file</span><span class="p">)</span>

    <span class="c1"># Assert</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">games</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="s2">&quot;game_id&quot;</span> <span class="ow">in</span> <span class="n">games</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="good-separation-pure-core-side-effect-shell">
<h4>Good Separation: Pure Core + Side-Effect Shell<a class="headerlink" href="#good-separation-pure-core-side-effect-shell" title="Link to this heading">¶</a></h4>
<p><strong>Pattern:</strong> Keep calculations pure, orchestrate I/O at edges.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># PURE: Core business logic (easy to test, vectorized)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">calculate_win_probabilities</span><span class="p">(</span>
    <span class="n">home_ratings</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">away_ratings</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate win probabilities (pure, vectorized).&quot;&quot;&quot;</span>
    <span class="n">rating_diff</span> <span class="o">=</span> <span class="n">home_ratings</span> <span class="o">-</span> <span class="n">away_ratings</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="n">rating_diff</span> <span class="o">/</span> <span class="mi">400</span><span class="p">))</span>

<span class="c1"># SIDE-EFFECT: Orchestration at the edge</span>
<span class="k">def</span><span class="w"> </span><span class="nf">simulate_tournament</span><span class="p">(</span><span class="n">games_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">ratings_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Simulate tournament (orchestrates pure logic + I/O).&quot;&quot;&quot;</span>
    <span class="c1"># Side effects: Load data</span>
    <span class="n">games</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">games_path</span><span class="p">)</span>
    <span class="n">ratings</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">ratings_path</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s2">&quot;team&quot;</span><span class="p">)</span>

    <span class="c1"># Side effects: Data prep</span>
    <span class="n">games</span> <span class="o">=</span> <span class="n">games</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">ratings</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s2">&quot;home_team&quot;</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">games</span> <span class="o">=</span> <span class="n">games</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">ratings</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="s2">&quot;away_team&quot;</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">suffixes</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;_home&quot;</span><span class="p">,</span> <span class="s2">&quot;_away&quot;</span><span class="p">))</span>

    <span class="c1"># PURE: Core calculation (vectorized, easy to test separately)</span>
    <span class="n">games</span><span class="p">[</span><span class="s2">&quot;win_prob&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">calculate_win_probabilities</span><span class="p">(</span>
        <span class="n">games</span><span class="p">[</span><span class="s2">&quot;rating_home&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
        <span class="n">games</span><span class="p">[</span><span class="s2">&quot;rating_away&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">games</span>
</pre></div>
</div>
<p><strong>Why this is better:</strong></p>
<ol class="arabic simple">
<li><p><strong>Pure function (<code class="docutils literal notranslate"><span class="pre">calculate_win_probabilities</span></code>):</strong></p>
<ul class="simple">
<li><p>Fast unit tests (no I/O)</p></li>
<li><p>Property-based tests (invariants)</p></li>
<li><p>Reusable in different contexts</p></li>
<li><p>Vectorized (meets NFR1)</p></li>
</ul>
</li>
<li><p><strong>Side-effect function (<code class="docutils literal notranslate"><span class="pre">simulate_tournament</span></code>):</strong></p>
<ul class="simple">
<li><p>Thin orchestration layer</p></li>
<li><p>Easy to see where I/O happens</p></li>
<li><p>Core logic testable independently</p></li>
</ul>
</li>
</ol>
</section>
<hr class="docutils" />
<section id="bad-mixing-pure-logic-with-side-effects">
<h4>Bad: Mixing Pure Logic with Side Effects<a class="headerlink" href="#bad-mixing-pure-logic-with-side-effects" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># BAD: Pure logic buried inside side effects</span>
<span class="k">def</span><span class="w"> </span><span class="nf">simulate_tournament_bad</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Simulate tournament (mixed design - hard to test).&quot;&quot;&quot;</span>
    <span class="n">games</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;data/games.csv&quot;</span><span class="p">)</span>  <span class="c1"># Side effect</span>

    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">game</span> <span class="ow">in</span> <span class="n">games</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>  <span class="c1"># Side effect + non-vectorized!</span>
        <span class="c1"># Side effects: Database calls</span>
        <span class="n">home_rating</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;SELECT rating FROM teams WHERE id = ?&quot;</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">home_team</span><span class="p">)</span>
        <span class="n">away_rating</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;SELECT rating FROM teams WHERE id = ?&quot;</span><span class="p">,</span> <span class="n">game</span><span class="o">.</span><span class="n">away_team</span><span class="p">)</span>

        <span class="c1"># Pure logic buried inside (can&#39;t test without database!)</span>
        <span class="n">rating_diff</span> <span class="o">=</span> <span class="n">home_rating</span> <span class="o">-</span> <span class="n">away_rating</span>
        <span class="n">prob</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="n">rating_diff</span> <span class="o">/</span> <span class="mi">400</span><span class="p">))</span>

        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prob</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Problems:</strong></p>
<ul class="simple">
<li><p>Can’t test calculation logic without database</p></li>
<li><p>Can’t use property-based tests</p></li>
<li><p>Slow (I/O in loop)</p></li>
<li><p>Violates vectorization requirement</p></li>
<li><p>Hard to debug (mixed concerns)</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="testing-strategy-by-function-type">
<h4>Testing Strategy by Function Type<a class="headerlink" href="#testing-strategy-by-function-type" title="Link to this heading">¶</a></h4>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Function Type</p></th>
<th class="head"><p>Test Type</p></th>
<th class="head"><p>Characteristics</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Pure</strong></p></td>
<td><p>Unit test, Property-based</p></td>
<td><p>Fast, no mocking, deterministic</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">calculate_win_probability()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><strong>Side-effect</strong></p></td>
<td><p>Integration test</p></td>
<td><p>Slower, requires fixtures/mocks</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">load_games()</span></code>, <code class="docutils literal notranslate"><span class="pre">update_team_rating()</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>Mixed</strong></p></td>
<td><p>❌ AVOID</p></td>
<td><p>Hard to test, refactor!</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">simulate_tournament_bad()</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<hr class="docutils" />
<section id="code-review-checklist-for-pure-vs-side-effect">
<h4>Code Review Checklist for Pure vs Side-Effect<a class="headerlink" href="#code-review-checklist-for-pure-vs-side-effect" title="Link to this heading">¶</a></h4>
<p>During code review, verify:</p>
<ul class="simple">
<li><p>[ ] <strong>Pure logic separated:</strong> Business calculations are pure functions</p></li>
<li><p>[ ] <strong>Side effects at edges:</strong> I/O, database, network calls in orchestration layer</p></li>
<li><p>[ ] <strong>No mixing:</strong> Pure functions don’t contain I/O operations</p></li>
<li><p>[ ] <strong>Vectorization:</strong> Pure functions use numpy/pandas operations (not loops)</p></li>
<li><p>[ ] <strong>Property tests:</strong> Pure functions have property-based tests for invariants</p></li>
<li><p>[ ] <strong>Integration tests:</strong> Side-effect functions have integration tests with fixtures</p></li>
</ul>
</section>
</section>
</section>
<hr class="docutils" />
<section id="pr-checklist-summary">
<h2>7. PR Checklist (Summary)<a class="headerlink" href="#pr-checklist-summary" title="Link to this heading">¶</a></h2>
<p>Every pull request must pass the following gates. The actual PR template is at
<code class="docutils literal notranslate"><span class="pre">.github/pull_request_template.md</span></code>. For
the philosophy behind this two-tier approach, see
<a class="reference internal" href="TESTING_STRATEGY.html"><span class="std std-doc"><code class="docutils literal notranslate"><span class="pre">docs/TESTING_STRATEGY.md</span></code></span></a> (Section: Quality Gates and Execution Tiers).</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Gate</p></th>
<th class="head"><p>Tool</p></th>
<th class="head"><p>Timing</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Lint pass</p></td>
<td><p>Ruff</p></td>
<td><p>Pre-commit (fast)</p></td>
</tr>
<tr class="row-odd"><td><p>Type-check pass</p></td>
<td><p>Mypy (<code class="docutils literal notranslate"><span class="pre">--strict</span></code>)</p></td>
<td><p>Pre-commit (fast)</p></td>
</tr>
<tr class="row-even"><td><p>Test pass</p></td>
<td><p>Pytest</p></td>
<td><p>PR / CI</p></td>
</tr>
<tr class="row-odd"><td><p>Docstring coverage</p></td>
<td><p>Manual review</p></td>
<td><p>PR review</p></td>
</tr>
<tr class="row-even"><td><p>No vectorization violations</p></td>
<td><p>Manual review</p></td>
<td><p>PR review</p></td>
</tr>
<tr class="row-odd"><td><p>Conventional commit messages</p></td>
<td><p>Commitizen</p></td>
<td><p>Pre-commit</p></td>
</tr>
<tr class="row-even"><td><p>PEP 20 compliance</p></td>
<td><p>Manual review</p></td>
<td><p>PR review</p></td>
</tr>
<tr class="row-odd"><td><p>SOLID principles</p></td>
<td><p>Manual review</p></td>
<td><p>PR review</p></td>
</tr>
<tr class="row-even"><td><p>Pure functions / functional design</p></td>
<td><p>Manual review</p></td>
<td><p>PR review</p></td>
</tr>
</tbody>
</table>
</div>
<section id="review-criteria">
<h3>Review Criteria<a class="headerlink" href="#review-criteria" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Code follows naming conventions (Section 2).</p></li>
<li><p>Imports are ordered correctly (Section 3).</p></li>
<li><p>New public APIs have docstrings (Section 1).</p></li>
<li><p>No <code class="docutils literal notranslate"><span class="pre">for</span></code> loops over DataFrames for calculations (Section 5).</p></li>
<li><p>Type annotations are complete (Section 4).</p></li>
<li><p>PEP 20 design principles respected (Section 6).</p></li>
<li><p>Pure functions used for business logic, side effects at edges (Section 6.2).</p></li>
<li><p>SOLID principles applied for testability (Section 10).</p></li>
<li><p>Data structures shared between Logic and UI use Pydantic models or TypedDicts.</p></li>
<li><p>Dashboard code never reads files directly — it calls <code class="docutils literal notranslate"><span class="pre">ncaa_eval</span></code> functions.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="file-module-organization">
<h2>8. File &amp; Module Organization<a class="headerlink" href="#file-module-organization" title="Link to this heading">¶</a></h2>
<section id="project-layout">
<h3>Project Layout<a class="headerlink" href="#project-layout" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">src</span><span class="o">/</span>
  <span class="n">ncaa_eval</span><span class="o">/</span>
    <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>          <span class="c1"># Package root — re-exports public API</span>
    <span class="n">py</span><span class="o">.</span><span class="n">typed</span>             <span class="c1"># PEP 561 marker</span>
    <span class="n">ingest</span><span class="o">/</span>              <span class="c1"># Data source connectors</span>
    <span class="n">transform</span><span class="o">/</span>           <span class="c1"># Feature engineering</span>
    <span class="n">model</span><span class="o">/</span>               <span class="c1"># Model ABC and implementations</span>
    <span class="n">evaluation</span><span class="o">/</span>          <span class="c1"># Metrics, CV, simulation</span>
    <span class="n">utils</span><span class="o">/</span>               <span class="c1"># Shared helpers (logging, assertions)</span>
<span class="n">tests</span><span class="o">/</span>
  <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
  <span class="n">test_</span><span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;.</span><span class="n">py</span>       <span class="c1"># Mirror src/ structure</span>
  <span class="n">conftest</span><span class="o">.</span><span class="n">py</span>            <span class="c1"># Shared fixtures</span>
<span class="n">dashboard</span><span class="o">/</span>               <span class="c1"># Streamlit UI (imports ncaa_eval — no direct IO)</span>
<span class="n">data</span><span class="o">/</span>                    <span class="c1"># Local data store (git-ignored)</span>
</pre></div>
</div>
</section>
<section id="id2">
<h3>Rules<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p><strong>One concept per module.</strong> A module should do one thing. If it grows beyond
~300 lines, consider splitting.</p></li>
<li><p><strong>Mirror <code class="docutils literal notranslate"><span class="pre">src/</span></code> in <code class="docutils literal notranslate"><span class="pre">tests/</span></code>.</strong> <code class="docutils literal notranslate"><span class="pre">src/ncaa_eval/models/elo.py</span></code> is tested by
<code class="docutils literal notranslate"><span class="pre">tests/test_elo.py</span></code> (or <code class="docutils literal notranslate"><span class="pre">tests/models/test_elo.py</span></code>).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> re-exports.</strong> Public symbols should be importable from the
package level: <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">ncaa_eval</span> <span class="pre">import</span> <span class="pre">EloModel</span></code>.</p></li>
<li><p><strong>No circular imports.</strong> If two modules need each other, extract shared types
into a third module.</p></li>
<li><p><strong>Configuration lives in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>.</strong> Do not create separate config files
for tools that support <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>.</p></li>
<li><p><strong>Line length is 110.</strong> Not the default 88. Configured in
<code class="docutils literal notranslate"><span class="pre">[tool.ruff]</span> <span class="pre">line-length</span> <span class="pre">=</span> <span class="pre">110</span></code>.</p></li>
</ol>
</section>
</section>
<hr class="docutils" />
<section id="additional-architecture-rules">
<h2>9. Additional Architecture Rules<a class="headerlink" href="#additional-architecture-rules" title="Link to this heading">¶</a></h2>
<p>These rules come from the project architecture and apply across all code:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Rule</p></th>
<th class="head"><p>Detail</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Type sharing</strong></p></td>
<td><p>All data structures shared between Logic and UI must use Pydantic models or TypedDicts.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>No direct IO in UI</strong></p></td>
<td><p>The Streamlit dashboard must call <code class="docutils literal notranslate"><span class="pre">ncaa_eval</span></code> library functions — never read files directly.</p></td>
</tr>
<tr class="row-even"><td><p><strong>Commit messages</strong></p></td>
<td><p>Use conventional commits format (<code class="docutils literal notranslate"><span class="pre">feat:</span></code>, <code class="docutils literal notranslate"><span class="pre">fix:</span></code>, <code class="docutils literal notranslate"><span class="pre">docs:</span></code>, etc.) enforced by Commitizen.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Python version</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&gt;=3.12,&lt;4.0</span></code>. Use modern syntax (<code class="docutils literal notranslate"><span class="pre">match</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span></code> statement, <code class="docutils literal notranslate"><span class="pre">X</span> <span class="pre">|</span> <span class="pre">None</span></code>).</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<hr class="docutils" />
<section id="solid-principles-for-testability">
<h2>10. SOLID Principles for Testability<a class="headerlink" href="#solid-principles-for-testability" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p><strong>SOLID principles make code testable.</strong> Violating SOLID = hard-to-test code.</p>
</div></blockquote>
<p>These five object-oriented design principles improve maintainability and testability. While not automatically enforced, they’re checked during code review.</p>
<section id="s-single-responsibility-principle-srp">
<h3>S - Single Responsibility Principle (SRP)<a class="headerlink" href="#s-single-responsibility-principle-srp" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>“A class should have only one reason to change.”</p>
</div></blockquote>
<p><strong>What it means:</strong> Each class/function does ONE thing well.</p>
<p><strong>Already enforced by:</strong> PEP 20 complexity checks (Section 6)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># GOOD: Single responsibility</span>
<span class="k">class</span><span class="w"> </span><span class="nc">GameLoader</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loads games from CSV files.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">GameValidator</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Validates game data.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">games</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">games</span><span class="p">[</span><span class="s2">&quot;home_score&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Scores cannot be negative&quot;</span><span class="p">)</span>

<span class="c1"># BAD: Multiple responsibilities</span>
<span class="k">class</span><span class="w"> </span><span class="nc">GameManager</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Does everything - loading, validating, processing, saving.&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">do_everything</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Too many reasons to change!</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p><strong>Testing impact:</strong> Easy to test (one thing = one test class)</p>
</section>
<hr class="docutils" />
<section id="o-open-closed-principle-ocp">
<h3>O - Open/Closed Principle (OCP)<a class="headerlink" href="#o-open-closed-principle-ocp" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>“Open for extension, closed for modification.”</p>
</div></blockquote>
<p><strong>What it means:</strong> Add new features without changing existing code.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># GOOD: Open for extension via inheritance</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RatingModel</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game</span><span class="p">:</span> <span class="n">Game</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">EloModel</span><span class="p">(</span><span class="n">RatingModel</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game</span><span class="p">:</span> <span class="n">Game</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_elo</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">GlickoModel</span><span class="p">(</span><span class="n">RatingModel</span><span class="p">):</span>  <span class="c1"># New model, no changes to existing code</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game</span><span class="p">:</span> <span class="n">Game</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_glicko</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>

<span class="c1"># BAD: Must modify existing code for each new model</span>
<span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="n">game</span><span class="p">:</span> <span class="n">Game</span><span class="p">,</span> <span class="n">model_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">model_type</span> <span class="o">==</span> <span class="s2">&quot;elo&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">calculate_elo</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">model_type</span> <span class="o">==</span> <span class="s2">&quot;glicko&quot;</span><span class="p">:</span>  <span class="c1"># Must modify this function</span>
        <span class="k">return</span> <span class="n">calculate_glicko</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Testing impact:</strong> Easy to mock/stub new implementations</p>
</section>
<hr class="docutils" />
<section id="l-liskov-substitution-principle-lsp">
<h3>L - Liskov Substitution Principle (LSP)<a class="headerlink" href="#l-liskov-substitution-principle-lsp" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>“Subtypes must be substitutable for their base types.”</p>
</div></blockquote>
<p><strong>What it means:</strong> If <code class="docutils literal notranslate"><span class="pre">Dog</span></code> inherits from <code class="docutils literal notranslate"><span class="pre">Animal</span></code>, you can use <code class="docutils literal notranslate"><span class="pre">Dog</span></code> anywhere you use <code class="docutils literal notranslate"><span class="pre">Animal</span></code> without breaking things.</p>
<p><strong>Already enforced by:</strong> Property-based tests verify contracts (Section: Test Purpose Guide)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># GOOD: Subclass honors parent contract</span>
<span class="k">class</span><span class="w"> </span><span class="nc">RatingModel</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game</span><span class="p">:</span> <span class="n">Game</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return probability in [0, 1].&quot;&quot;&quot;</span>
        <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">EloModel</span><span class="p">(</span><span class="n">RatingModel</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game</span><span class="p">:</span> <span class="n">Game</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="c1"># Always returns [0, 1] as promised</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">**</span> <span class="p">((</span><span class="n">opp_rating</span> <span class="o">-</span> <span class="n">rating</span><span class="p">)</span> <span class="o">/</span> <span class="mi">400</span><span class="p">))</span>

<span class="c1"># BAD: Subclass violates parent contract</span>
<span class="k">class</span><span class="w"> </span><span class="nc">BrokenModel</span><span class="p">(</span><span class="n">RatingModel</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game</span><span class="p">:</span> <span class="n">Game</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="c1"># Returns values &gt; 1.0, breaking the contract!</span>
        <span class="k">return</span> <span class="n">rating_difference</span> <span class="o">*</span> <span class="mi">100</span>
</pre></div>
</div>
<p><strong>Testing impact:</strong> Property tests verify contracts hold across all implementations</p>
</section>
<hr class="docutils" />
<section id="i-interface-segregation-principle-isp">
<h3>I - Interface Segregation Principle (ISP)<a class="headerlink" href="#i-interface-segregation-principle-isp" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>“Many specific interfaces are better than one general-purpose interface.”</p>
</div></blockquote>
<p><strong>What it means:</strong> Don’t force classes to implement methods they don’t need.</p>
<p><strong>Already enforced by:</strong> MyPy strict mode with Protocols (Section 4)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># GOOD: Small, focused interfaces</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Predictable</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game</span><span class="p">:</span> <span class="n">Game</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span> <span class="o">...</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Trainable</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">games</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span> <span class="o">...</span>

<span class="k">class</span><span class="w"> </span><span class="nc">EloModel</span><span class="p">:</span>
    <span class="c1"># Only implements what it needs</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game</span><span class="p">:</span> <span class="n">Game</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span> <span class="o">...</span>

<span class="c1"># BAD: Fat interface forces unused methods</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">predict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game</span><span class="p">:</span> <span class="n">Game</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span> <span class="o">...</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">games</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span> <span class="o">...</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">cross_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">games</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span> <span class="o">...</span>

    <span class="c1"># Simple models forced to implement methods they don&#39;t need!</span>
</pre></div>
</div>
<p><strong>Testing impact:</strong> Less mocking needed (small interfaces)</p>
</section>
<hr class="docutils" />
<section id="d-dependency-inversion-principle-dip">
<h3>D - Dependency Inversion Principle (DIP)<a class="headerlink" href="#d-dependency-inversion-principle-dip" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>“Depend on abstractions, not concretions.”</p>
</div></blockquote>
<p><strong>What it means:</strong> High-level code shouldn’t depend on low-level details.</p>
<p><strong>Already enforced by:</strong> Architecture rule “Type sharing: use Pydantic models or TypedDicts” (Section 9)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># GOOD: Depends on abstraction (Protocol)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Simulator</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">Predictable</span><span class="p">):</span>  <span class="c1"># Any model works</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">simulate_tournament</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">games</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Game</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">game</span> <span class="ow">in</span> <span class="n">games</span><span class="p">:</span>
            <span class="n">pred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>  <span class="c1"># Works with any Predictable</span>
            <span class="o">...</span>

<span class="c1"># BAD: Depends on concrete implementation</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Simulator</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elo_model</span><span class="p">:</span> <span class="n">EloModel</span><span class="p">):</span>  <span class="c1"># Locked to EloModel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">elo_model</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">simulate_tournament</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">games</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Game</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
        <span class="c1"># Can only use EloModel, not flexible</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p><strong>Testing impact:</strong> Easy to inject test doubles</p>
</section>
<hr class="docutils" />
<section id="solid-review-checklist">
<h3>SOLID Review Checklist<a class="headerlink" href="#solid-review-checklist" title="Link to this heading">¶</a></h3>
<p>During code review, verify:</p>
<ul class="simple">
<li><p>[ ] <strong>SRP:</strong> Classes/functions have single, clear responsibility (covered by PEP 20 complexity)</p></li>
<li><p>[ ] <strong>OCP:</strong> New features added via extension (inheritance, composition), not modification</p></li>
<li><p>[ ] <strong>LSP:</strong> Subtypes honor parent contracts (property tests verify this)</p></li>
<li><p>[ ] <strong>ISP:</strong> Interfaces are small and focused (use Protocols, not fat abstract classes)</p></li>
<li><p>[ ] <strong>DIP:</strong> Depends on abstractions (Protocols, TypedDicts), not concrete classes</p></li>
</ul>
</section>
<section id="summary-what-s-already-covered">
<h3>Summary: What’s Already Covered<a class="headerlink" href="#summary-what-s-already-covered" title="Link to this heading">¶</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>SOLID Principle</p></th>
<th class="head"><p>Already Enforced By</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>SRP</strong></p></td>
<td><p>PEP 20: “Simple is better than complex” (complexity ≤ 10)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>OCP</strong></p></td>
<td><p>Manual review (can’t automate)</p></td>
</tr>
<tr class="row-even"><td><p><strong>LSP</strong></p></td>
<td><p>Property tests: “probabilities in [0, 1]” invariants</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ISP</strong></p></td>
<td><p>MyPy strict mode: Protocols preferred over abstract classes</p></td>
</tr>
<tr class="row-even"><td><p><strong>DIP</strong></p></td>
<td><p>Architecture: “Type sharing via Pydantic/TypedDicts”</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Result:</strong> SOLID compliance is mostly automated or already covered by existing standards. Code review adds a final check for OCP and overall SOLID adherence.</p>
</section>
</section>
<hr class="docutils" />
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> — Single source of truth for all tool configurations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">specs/05-architecture-fullstack.md</span></code> Section 12 — Coding standards</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">specs/05-architecture-fullstack.md</span></code> Section 10 — Development workflow</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">specs/03-prd.md</span></code> Section 4 — Technical assumptions &amp; constraints</p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="TESTING_STRATEGY.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Testing Strategy</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="user-guide.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">User Guide</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2026, Dan Hilgart
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">NCAA Eval Style Guide</a><ul>
<li><a class="reference internal" href="#docstring-convention-google-style">1. Docstring Convention (Google Style)</a><ul>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#rules">Rules</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#naming-conventions">2. Naming Conventions</a><ul>
<li><a class="reference internal" href="#additional-rules">Additional Rules</a></li>
</ul>
</li>
<li><a class="reference internal" href="#import-ordering">3. Import Ordering</a><ul>
<li><a class="reference internal" href="#mandatory-rules">Mandatory Rules</a></li>
<li><a class="reference internal" href="#id1">Example</a></li>
<li><a class="reference internal" href="#active-ruff-rules">Active Ruff Rules</a></li>
<li><a class="reference internal" href="#suppressed-rules">Suppressed Rules</a></li>
</ul>
</li>
<li><a class="reference internal" href="#type-annotation-standards">4. Type Annotation Standards</a><ul>
<li><a class="reference internal" href="#what-strict-means-for-developers">What <code class="docutils literal notranslate"><span class="pre">--strict</span></code> Means for Developers</a></li>
<li><a class="reference internal" href="#practical-guidelines">Practical Guidelines</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vectorization-first">5. Vectorization First</a><ul>
<li><a class="reference internal" href="#why">Why</a></li>
<li><a class="reference internal" href="#correct-pattern">Correct Pattern</a></li>
<li><a class="reference internal" href="#incorrect-pattern">Incorrect Pattern</a></li>
<li><a class="reference internal" href="#exceptions">Exceptions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#design-philosophy-pep-20-the-zen-of-python">6. Design Philosophy (PEP 20 - The Zen of Python)</a><ul>
<li><a class="reference internal" href="#enforced-principles">Enforced Principles</a><ul>
<li><a class="reference internal" href="#simple-is-better-than-complex">Simple is Better Than Complex</a></li>
<li><a class="reference internal" href="#explicit-is-better-than-implicit">Explicit is Better Than Implicit</a></li>
<li><a class="reference internal" href="#readability-counts">Readability Counts</a></li>
<li><a class="reference internal" href="#flat-is-better-than-nested">Flat is Better Than Nested</a></li>
<li><a class="reference internal" href="#there-should-be-one-obvious-way-to-do-it">There Should Be One Obvious Way to Do It</a></li>
</ul>
</li>
<li><a class="reference internal" href="#code-review-checklist-for-pep-20">Code Review Checklist for PEP 20</a></li>
<li><a class="reference internal" href="#complexity-gates-ruff-configuration">6.1 Complexity Gates (Ruff Configuration)</a></li>
<li><a class="reference internal" href="#pure-functions-vs-side-effects">6.2 Pure Functions vs Side Effects</a><ul>
<li><a class="reference internal" href="#pure-functions-preferred">Pure Functions (Preferred)</a></li>
<li><a class="reference internal" href="#side-effect-functions-push-to-edges">Side-Effect Functions (Push to Edges)</a></li>
<li><a class="reference internal" href="#good-separation-pure-core-side-effect-shell">Good Separation: Pure Core + Side-Effect Shell</a></li>
<li><a class="reference internal" href="#bad-mixing-pure-logic-with-side-effects">Bad: Mixing Pure Logic with Side Effects</a></li>
<li><a class="reference internal" href="#testing-strategy-by-function-type">Testing Strategy by Function Type</a></li>
<li><a class="reference internal" href="#code-review-checklist-for-pure-vs-side-effect">Code Review Checklist for Pure vs Side-Effect</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#pr-checklist-summary">7. PR Checklist (Summary)</a><ul>
<li><a class="reference internal" href="#review-criteria">Review Criteria</a></li>
</ul>
</li>
<li><a class="reference internal" href="#file-module-organization">8. File &amp; Module Organization</a><ul>
<li><a class="reference internal" href="#project-layout">Project Layout</a></li>
<li><a class="reference internal" href="#id2">Rules</a></li>
</ul>
</li>
<li><a class="reference internal" href="#additional-architecture-rules">9. Additional Architecture Rules</a></li>
<li><a class="reference internal" href="#solid-principles-for-testability">10. SOLID Principles for Testability</a><ul>
<li><a class="reference internal" href="#s-single-responsibility-principle-srp">S - Single Responsibility Principle (SRP)</a></li>
<li><a class="reference internal" href="#o-open-closed-principle-ocp">O - Open/Closed Principle (OCP)</a></li>
<li><a class="reference internal" href="#l-liskov-substitution-principle-lsp">L - Liskov Substitution Principle (LSP)</a></li>
<li><a class="reference internal" href="#i-interface-segregation-principle-isp">I - Interface Segregation Principle (ISP)</a></li>
<li><a class="reference internal" href="#d-dependency-inversion-principle-dip">D - Dependency Inversion Principle (DIP)</a></li>
<li><a class="reference internal" href="#solid-review-checklist">SOLID Review Checklist</a></li>
<li><a class="reference internal" href="#summary-what-s-already-covered">Summary: What’s Already Covered</a></li>
</ul>
</li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=39bb1c6d"></script>
    <script src="_static/doctools.js?v=fd6eb6e6"></script>
    <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>